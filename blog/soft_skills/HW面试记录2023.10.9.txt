2023.10.09华为面试记录
地点：西安某酒店
约面时间：11:30
	由于华为开奖时间晚，为了防止未来两个月忘记面试细节后盲目焦虑，我于面试完的第二天决定将这次面试记录下来，以作为未来考虑是否等华子的参考资料。
	昨天主管面结束后，我坐在等候区拿出电脑，看到了招聘官网中的主管面试通过，瞬间觉得这两个月的秋招，这一年多的准备都在这一刻体现出了价值，由衷感到自己的努力是值得的。从酒店大门出来，到一家咖啡厅的露天桌椅处坐下发了一个朋友圈，思考了一会文案，本想说“入池开泡”，后又想到这一路走来实属很不容易，同时昨天的三场面试自我感觉表现都很好，所以换了个积极一点的文案，难以抑制自己的兴奋。
	今天是面试完的第二天，经过一晚上的冷静，开始意识到自己只是进入了华为的池子，即使西电是华为的目标院校，招聘人数也是众多院校中最多的，但也有人建议面完就当没发生过，all in年底的开奖是一种风险极大的行为。除了以上网上看到的信息，我又通过三个渠道主动获取了以下信息：一，询问hr学长得知，他会帮我打听我的排名情况，并且让我尽量拖已有的offer，如果实在拖不住提前两天告诉他；二，我在牛客上发布了一个投票，统计西安华为的数通部门-数字芯片通过面试的人数，10.9号一天大约40人入池，考虑到未投票的人数，和提前批的池子，保守估计今年该部门该岗位秋招的池子里至少也有300人；三，从导员处得知，22届西电微院有一名本科生进入华为，23届西电微院有一名本科生得到海思部门的offer，因考上研未去，表明的确是有成功的先例，只不过难度有多大也可想而之了。
	现在开始回忆，尽可能详细的记录昨天的三轮面试情况。
	9点出发，从国际医学中心坐地铁到甘家寨，后乘坐公交车，于10:20左右到达面试的酒店，签到完成，开始等候。十分钟后，接到hr等电话，告知有一名同学放弃了面试，询问是否可以提前安排我的面试，我说当然可以。又过了二十分钟，hr联系我已重新安排，需要我再签到一次。
	10:52，重新签了到，开始等待第一轮面试。
	11:04，收到一面通知，地点2F-AA10。
		我带着自己打印的项目资料和简历，进入面试区，这是酒店二楼的公共大厅，放眼望去约莫有一百多人同时面试。我的面试点是在第一列最后一行的角落，由于做好了充分的心理准备，我并没有过多的紧张，一边适应周围的环境一边坚定的走向面试官。一面面试官上身西装领带，手臂和前胸撑起了西服，猜测是个健身选手，他正对一台笔记本电脑坐着，彼此确认过眼神后，他站起来和我握了握手示意我入座，面试正式开始。面试官主动请求查看我携带的资料，我首先将自己的简历取下递给他，后简单介绍了一下其他的几份资料：“这两份是我所做的设计项目，这一份是我的一个验证项目，另外还有一个大创项目”“好的，那我们开始吧，你简单介绍一下你自己”。经过九月和十月初的十多次面试，流程已轻车熟路，自我介绍也没有太大的变化，我介绍了自己的姓名学校学历背景后，简要描述了三段实习经历中所做的主要工作和五段项目经历，“这就是我过去的经历，谢谢”，有趣的是过去的面试我会提到自己在ic设计和验证上的双重能力，但是我下意识的在这次面试中避开了这个描述，现在分析当时对华为面试官了解不多，怕给自己挖太多坑，另外让面试官一开始对我预期太高的话，之后如果发现吹牛吹大了会对我有不好的印象。自我介绍结束，开始以我的简历为中心提问，所设计ip的功能，主要的难点是什么，ut测试是如何做的，用uvm验证的吗，代码覆盖率的理解…（问题很多，前20分钟不断提问，但都是基于我的简历内容的八股），建立时间保持时间，如果保持时间违例如何修复（这里有个有趣的地方，面试官让在纸上写一下保持时间违例的情况，我画了一个电路图，并写出Tcomb+Tco-T>Thold这个公式，讲解组合逻辑延时太小导致违例。面试官问我“这个T是什么，保持时间和T有关系吗”，我回答说“有关的”，“一般是建立时间和T有关吧，有吗，你再想一下”，我开始怀疑自己了，究竟是不是自己错了，还是面试官压力我看我能不能坚持自己的选择？想了十多秒，我一脸肯定的回答“我认为是有关的”，然后捕捉到他脸上一丝隐蔽的没绷住的坏笑。），后又问了几个问题（一二面的八股问题，自我感觉对答如流，没有答不上来的），八股后，开始手撕代码：“我们做一道题吧，你再拿一张草稿纸（重点在再拿一张，因为手撕代码的纸是需要签名留存的，昨天晚上我查了笔记发现，保持时间违例的公式里的确没有T，我意识到面试官可能在帮我，因为前一张纸上有那条错误公式），我给你说题目要求，你可以用笔记录。设计一个模块，三级流水，…（巴拉巴拉后面都忘了）。都理解了吗，有不清楚的可以提问”，我犹豫了几秒告诉面试官“我没做过流水线设计”，他说“噢，那我们可以考虑换一道”，他在电脑上划了十多秒，说“你记录一下，设计一个模块，使用同一个时钟，输入4bit数据，和一个输入使能信号，输出为5bit数据，也有一个输出使能信号，要求将4bit输入的数据拼接起来以5bit输出。问题理解了吗”，之后我提出自己的问题，大概问了2分钟，确定自己完全理解题目之后，他说“大约是15分钟时间答题，到时后我会提醒你，如果没写完可以再加5分钟”开始答题，在我答题的时候，面试官在电脑上敲字，后在网上了解到这是在写我的面评，后续会他作为我的面试表现决定是否能被捞起来。
# ===========================================
# 一面手撕start
# ===========================================
module swtich(
  input clk,
  input valid_in,
  input [3:0] data_in,
  //交给面试官看的时候，他说valid_out也是输出信号
  //我说听错了，口头给了一个解决方案，把valid_out放入输出逻辑就行了，他说没关系
  input valid_out,
  output [4:0] data_out
);
  //取3和4的公倍数，存4个3bit，一定能取3个4bit
  //这个地方也是看错了，其实是4bit输入，5bit输出
  //我说思路都是一样的，面试官也说可以的，就按3bit和4bit来看
  reg [11:0] tmp;
  reg [1:0] count;

  //用计数器来控制当前写入了多少数据了，可以读出哪些数据
  //评价说这个思路是对的
  always@(posedge clk)
  begin:COUNTER_PROC
    if(valid_in)
      count <= count + 1;
    else if(count == 2'b11)
      count <= 0;
    else
      count <= count;
  end

  //后两个过程块，面试官看了半天说有一个问题，读出的数据可能是上一轮写入的数据
  //我当时也没多想，被他的思路带过去了，说确实是
  //他提出解决方案说，这种我们可以做一个乒乓操作，写入和读出分开，交换读写
  //我说是的，这样要好一点，我设计的时候没考虑到这个时序问题
  //今天复盘的时候我才意识到，其实不会出现面试官所说的读出旧数据的情况
  //因为计数器已经避免了在数据不达到4bit时输出为0
  always@(posedge clk)
  begin:SOTRE_PROC
    if(valid_in)
      case(count)
        2'b00:tmp[11:9] <= data_in;
        2'b01:tmp[8:6]  <= data_in;
        2'b10:tmp[5:3]  <= data_in;
        2'b11:tmp[2:0]  <= data_in;
      endcase
    else
      tmp <= tmp;
  end

  always@(posedge clk)
  begin:OUTPUT_PROC
    if(valid_out)
      case(count)
        2'b01:data_out  <= tmp[11:8];
        2'b10:data_out  <= tmp[7:4];
        2'b11:data_out  <= tmp[3:0];
        default:data_out<= 0;
      endcase
    else
      data_out <= 0;
  end 

//结束后，面试官提出另一个建议，一般我们不会寄存全部的bit，只需要存当前周期没有输出
//用一个3bit的寄存器就行，再用一个信号控制每个周期哪些bit有效，这是标准答案，但我这个答案也是对的
endmodule
# ===========================================
# 一面手撕end
# ===========================================
15分钟之内完成手撕代码，结束之后，开始围绕我进行闲聊了几分钟，一面并未让我反问，握手示意一面结束，谢过面试官后回到等候区等待，此刻11:57，一面用时55min左右。
	12:05，短信通知一面通过。和朋友在微信讨论面试情况，也发现自己线下面试的表现远好于线上面试，线下有一种压迫感push我去思考，线上问到不会的我大概率直接就说不会了，懒得去思考。过了一会有华为员工问有没有刚面完的，发给我们一人一张kfc的餐券，说“下一轮面试一点半开始，大家可以先去吃饭了。”吃饭时自嘲这可能是我过来跑龙套的片酬吧，朋友说“不管怎样，这套餐也算是给面子了。”吃完饭后回到等候区复盘一面的情况，一面提问的都是设计知识，我担心自己二面就不会这么幸运了，万一抽到一道难一点的设计怎么办，同时也担心自己uvm代码撕不出来，就决定二面时的自我介绍按照以前准备的说，让面试官自己决定问什么。然后带上耳机听歌放松了十多分钟，13:20时面试叫号屏开始显示预备面试的姓名，表示下午场开始了。我赶紧摘下耳机，担心这根弦一松就完蛋了，还好，调整了几分钟恢复了战斗状态。
	13:25，通知二面，地点2F-AA5。
		比第一次心里有底了，虽然也担心手撕代码会不会太难，但还算自信的走向面试官，二面也在第一列，行数则在中间位置。二面面试官比一面面试官偏瘦，显得更像一个工程师，确认过眼神，入座，我主动将简历递出：“您好面试官，这是我的简历，请您查看”，“好的，我看简历的同时，你可以做一个自我介绍”，按照自己的计划，这次自我介绍我没有刻意避免自己的锋芒，将所有信息丢了出去，也不再考虑是否会给面试官太高的预期（后面面试的过程中，确实感受到面试官对我有着更高的标准，在我没回答上问题的时候能够清楚捕捉到，所以感觉二面的面评应该比一面略差），他看着我的简历，先说到对一个本科生，能做到这样已经非常少了，并且表示华为也是要求自己的员工同时会设计和验证的能力，开始对照着我的简历一条一条的询问，我也依次回答我所做的任务，最后询问我在过去的经历之后，倾向于做设计还是验证方向，我说我都可以并没有偏向哪一边。接着他选择了问我验证方面的知识（现在我猜测，二面面试官应该是看了我一面的面评和信息），从我做的验证模块入手，问了sv和uvm的八股，代码功能覆盖率，用到的工具，我们如何在driver发送一个错误的激励（这个我没回答上来，他说“driver中实现正确的激励是很简单的对吧，那我们如何发一个错误的，比如时序上不按照正常的来发送？”我想了一会说：“我之前没有这么做过，但是我刚刚思考出了一种可能的解决方案，我大概描述一下，如果是我，我会在test中定义一个cfg的object，通过config机制传到driver中，来确定当前应该采用那种激励方式”，面试官考虑了一会说，也可以，但是这样只能实现一种错误的激励方式，那如果我们有1000种错误方式如何做呢。然后想了会没回答上来，我感觉不太可能在driver中实现那么多，思考了一分多钟没结果就坦白说我这部分暂时想不出来，面试官说好的没事，当然这个肯定是有办法做的，你下来可以再思考一下），…，又问了几道验证八股之后开始手撕代码，问我了解以太网吗，你来实现一个以太网报文的package，我说不知道，但我表示自己可以尝试一下。他一边给我讲解，一边在纸上写下题目：“一个以太网报文的数据分为48bit的DMAC，48bit的SMAC，16bit的length，和位宽为16～512byte的payload，我给你简化一下，后面还有个校验码就不考虑了。你写一个package的class，将DMAC约束为全1，SMAC随机，length的值为payload的长度，payload定义成动态数组，位宽约束在16～512之间，再写一个pack函数，支持将这些信号打包，你知道pack函数吧”，我说“嗯，uvm里有一个域的自动化，里面就有pack函数，但是这个不用自己定义啊，直接用`uvm_object_utils注册后就可以调用这个函数的呀”，面试官说“当然我们都知道可以直接调用，但我们如何自己来实现这个功能呢，只用sv，不用uvm”。其实感觉这道题并不难，但自己做用sv和uvm验证项目还是去年11月份，已经过快一年了，只能凭借脑袋中残存的对事务级transaction建模的回忆开始写代码。写代码时，面试官也是对照的我的简历在电脑上一顿猛敲，时不时的看看我写的代码，因为心态比较好，并未受到影响，思考时索性把手放到其他地方让他能清楚看到我写的内容。15分钟之内写完，面试官评价我写的代码，整体是正确的，悬着的心落了地。
# ===========================================
# 二面手撕start
# ===========================================
class package;
  soft rand bit [47:0] DMAC;
  soft rand bit [47:0] SMAC:
  soft rand bit [15:0] length;
  soft rand byte []    payload;

  //这里有一个严重的问题，我当时没理解面试官所说的length的值是payload的长度
  //面试官举例子说如果length是10，payload就是16，因为十六进制
  //我理解成如果length的值是10的话，payload的位宽就是16
  //导致我怎么都想不通，那length用16进制能表示的范围大了去了，payload的位宽是不是要取两次约束的交集
  //导致我在这个地方卡了很久，后面加了这样一个payload_width，其实是不需要的
  soft rand bit [8:0]  payload_width;

  constraint DMAC_c {DMAC==48'hffff_ffff_ffff_ffff;};
  constraint length_c {payload_width inside [16:512];};
  //由于刚刚那个问题，导致我认为length的值是随机的，所以一开始并为写下面这一行约束
  //还好面试官提醒了我length还没约束啊，我当即发现我对题目的理解错了
  //不过还是将这个洞补上了，写下了下面这句代码，将影响降到最低
  //最后，从可能因为错误理解题目导致代码逻辑错误，成功变成了知识多定义了一个payload_width
  //最后来说一下正确的写法应该是，去掉payload_width变量
  //直接constraint length_c {length inside[16:512];};
  //再payload = new[length];即可
  constraing length {length==payload_width;};
  
  function new();
    payload = new[payload_width];
  endfunction

  //这部分pack也因为错误理解题目的原因导致思考时间不足，写成一下的样子
  //面试官说逻辑是正确的，result的位宽定义有错
  function pack(DMAC,SMAC,length,payload);
    bit [632:0] result;
    result = {DMAC,SMAC,length,payload};
    return result;
  endfunction

  //再手撕代码之前，一定要大胆问面试官，彻底理解题目后再开始写
  //我这次能补上漏洞只因为运气还行，但和功能实现错误导致手撕错误也就是咫尺之隔
endclass
# ===========================================
# 二面手撕end
# ===========================================
之后聊了一会代码内容，面试官问我有没有什么问题，由于一面没有反问环节让我下意识毫无准备，集中注意力思考了两秒，问了个我的代码还有什么问题吗，问完意识到可能这会暴露出我更多的问题，但话已说出口只能硬着头皮走下去了，面试官说我们一般不定义soft，这样可能会导致一些问题，不能像我这样全都写成soft，我说“是的，可能我当时只考虑到了后续可以覆盖约束的问题，没考虑到这一点。”又聊了一会，道了谢回到等候区，此刻14:20，二面用时也是55min左右。
	14:26，短信通知二面通过。一面55分钟设计，二面55分钟验证，不得不说，华为面试体验真的很好，这次面试把我的真正实力体现了出来。微信聊了还不到5分钟，主管面就开始了。
	14:32，通知主管面，地点2F-AA7。
		赶紧放下手机，带着资料三入面试厅。三面的地点也是在第一列，行数在一二面的中间位置，所以要经过二面面试官，虽然他没看到我，但我还是心里默念了声感谢。和主管对视的第一眼就感觉不妙，这场面试不简单，我照旧主动将简历递给面试官，接着是自我介绍环节。自我介绍时，面试官死死的盯住我，若要用一种比喻形容的话，面试官的眼睛锐利得像一双鹰眼，能把我看穿的感觉。这也导致了我自我介绍有一点卡壳，不过整体上没有大问题，到后面随着提问的深入，当我意识到这场面试在专业技能上注定是被碾压局之后，我开始转换了策略，从自信、虚心学习且充满活力等角度塑造自己的形象，后面发生的事情也应证了该策略的正确性。面试官看了我的简历内容之后，第一句话就是“你这里面哪一个项目是最复杂的？”，我说是这个h2h32，也是我花时间最长的项目，接着问我这个ip能跑到多高的频率，我说没有考虑频率，这个项目问了一会就结束了，“好，下一个是哪个”，我拿着peslv的资料递给他，说这是我做的第二个ip，他研究了一会后笑了笑：“噢，这个比刚刚那个还简单”，我说“是，刚刚那个要复杂一点”。就这样过完我这几个项目，没有深挖，问我认为数字设计的难点是什么，感觉他也知道我大概的水平了，接着就开始闲聊阶段。问我是哪里人，以后的意向工作地点，我认为工作和上学的区别是什么，我之前实习的公司都是怎么找到的，我回答自己以就业为导向的，所以从大二就开始主动找实习了。为什么不考研，我从就业形式和自己的经历等角度给出了我认为还不错的阐述，这部分没有太大问题，之前很多次面试都问过了，已经形成了一套合适的答案。又问了我对华为的理解，我从华为被封禁打压的顽强精神，创新，企业文化等等角度给出了几点我自己的理解，同时也表示我选择微电子专业也是受到华为的影响，在这一年多的项目和实习阶段华为传递出的精神也是让我能坚持下去的精神动力。他提到华为是很累的，经常加班，有末位淘汰机制，我从自己的年龄，和事业发展初期想要锻炼自己等角度表明自己完全认可华为的做法，并且实习公司都有很多华为出来的人，之前也都是对此有所了解，完全可以接受，面试官开玩笑问我有没有了解过他们为什么出去了，是不是被开除的，最后问了英语水平如何。接着就是反问环节，我问了两个问题，如果入职了华为有什么样的培训机制，回答简单直接：“华为的培训机制非常完善，进来之后会有接近三个月的培训，能让你各方面的能力得到锻炼”，能从回答中感受到面试官的自豪感。第二个问题是询问了ict的主要负责业务是什么，从我前面的回答中他知道了我了解的是海思和麒麟芯片，开始给我讲解ict的业务范围，讲了路由器，通信等等，告诉我数通部门在ict中所处的定位，主要做的事网络相关的芯片，最后，并且表示ict才是华为的看家本领，绝对的世界第一，我也是连连点头。接着说道这次面试结束，我道谢后离开面试厅，此刻15:03，主管面30min左右。
	15:09，短信通知今天面试全部结束，我打开电脑进入华为招聘页，看到面试通过，顿时感到一身轻松，也有点不可思议今天发生的事情。
	至此面试结束，历时总共4个多小时，面试时间总共两小时20分钟。
